# Idea Stock (アイデア・ストック)

チームの課題解決と**業務ノウハウの蓄積・資産化**を促進する、社内向けQ&A掲示板アプリケーション。
職業訓練校のチーム開発課題（5名体制）として、要件定義書を基にフルスクラッチで開発しました。

![アプリケーションのスクリーンショット](img/screenshot.png)
## 🌐 概要
* **目的**: 社内の業務改善アイデアや技術的な質問をストックし、組織の資産として活用する。
* **機能**: ユーザー登録、ログイン認証、質問投稿・一覧・詳細表示、回答投稿、パスワード変更など。

## 🛠 技術スタック
* **言語**: PHP 8.x (フレームワーク未使用)
* **データベース**: MySQL 8.x
* **フロントエンド**: HTML5, CSS3
* **インフラ/環境**: XAMPP (Apache), VS Code
* **バージョン管理**: Git / GitHub

## 📅 開発体制
* **開発期間**: 202X年X月〜X月
* **チーム構成**: 5名
* **私の役割**: **コア機能設計 / セキュリティ実装 / UI・CSS設計**

## 💻 担当領域と実装詳細

私は主に**「アプリケーションの共通基盤」**と**「セキュリティ機能」**の実装を担当しました。チーム全体が効率よく開発できるよう、ディレクトリ構成の決定や共通関数の整備を行い、開発の土台を作りました。

### 1. 共通処理・基盤の実装 (`includes/` ディレクトリ)
アプリケーション全体で読み込まれるコアファイルの設計・実装を一手に担いました。

| ファイル | 実装内容・こだわり |
| :--- | :--- |
| **`includes/dbConnect.php`** | **堅牢なDB接続**<br>PDOを使用し、接続エラー時には `try-catch` で例外を捕捉して適切に処理を中断する仕組みを実装しました。 |
| **`includes/function.php`** | **汎用関数群の集約**<br>・`h()`: XSS対策のエスケープ処理<br>・`isUser()`: `password_verify` を用いたセキュアなログイン認証<br>・`switchCss()`: ページごとのCSS自動読み込みとキャッシュ対策 |
| **`includes/header.php`** | **動的ナビゲーション**<br>ログイン状態や現在表示しているページ（`questions.php` 等）を判定し、メニューボタン（ログイン/ログアウト/質問追加）を自動で出し分けるロジックを実装しました。 |
| **`includes/config.php`** | **設定の一元管理**<br>セッション開始や必須ファイルの読み込み順序を管理し、各ページでの記述量を減らしました。 |

### 2. 機能実装（バックエンド）
* **質問投稿機能 (`questionInput.php`)**:
    * 必須入力チェックや文字数制限（255文字）などのバリデーションを実装し、データの整合性を保ちました。
* **パスワード変更機能 (`changePassword.php`)**:
    * **仕様書には記載がありませんでしたが、セキュリティリスクを考慮してチームに提案し、追加実装しました。** 現在のパスワード確認やハッシュ化更新を行う安全な設計にしています。

### 3. UI/CSS設計
* **ベーススタイルの構築 (`style.css`)**:
    * サイト全体のフォント、配色、共通レイアウトを定義。
* **ページ固有スタイルの実装**:
    * ログイン画面 (`index.php`)、ユーザー登録 (`userAdd.php`)、質問投稿画面などのフォーム周りのデザインを担当。ユーザーが入力しやすいレイアウトを意識しました。

## 🔥 直面した課題と解決策

### ディレクトリ構造の大規模変更によるコンフリクト
**課題:**
開発中盤、保守性を高めるためにファイル構造を整理（`css`フォルダの階層化や`includes`へのファイル移動など）を行いました。しかし、Gitの挙動を十分に理解せず独断で大規模な移動を行ったため、チームメンバーの手元との間に深刻なコンフリクトが発生しました。

**解決策と学び:**
1.  **影響範囲の周知不足を反省**:
    * ファイルパスが変わるような大きな変更は、作業前にチームに相談し、マージのタイミングを合わせるべきだったと痛感しました。
2.  **復旧作業を通じたGit理解**:
    * コンフリクトの解消作業を通じて、Gitがファイルの移動をどう追跡するかや、競合解決の具体的な手順を身を持って学習しました。
3.  **再発防止策**:
    * 以降は「1プルリクエスト＝1機能」を徹底し、ディレクトリ構成に関わる変更は全員が作業していないタイミングで行うルールを設けました。

## 📂 ディレクトリ構成
```text
root
├── css/
│   ├── base/            # リセットCSSなど
│   ├── pages/           # 各ページ固有のCSS (questionInput.css, login.css 等)
│   └── style.css        # 共通のベーススタイル
├── img/
├── includes/            # ★担当箇所：共通部品ディレクトリ
│   ├── config.php       # 設定・セッション管理
│   ├── dbConnect.php    # DB接続・例外処理
│   ├── footer.php       # 共通フッター
│   ├── function.php     # 共通関数 (バリデーション, 認証, CSS管理)
│   └── header.php       # 共通ヘッダー (動的表示制御)
├── js/
├── changePassword.php   # ★担当箇所：パスワード変更機能
├── questionInput.php    # ★担当箇所：質問投稿機能
├── index.php            # ログイン画面
├── userAdd.php          # ユーザー登録画面
└── questions.php        # 質問一覧画面
